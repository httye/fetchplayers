# UserInfoAPI - Minecraft Paper æ’ä»¶ v2.0

UserInfoAPI æ˜¯ä¸€ä¸ªä¸º Minecraft Paper æœåŠ¡å™¨å¼€å‘çš„æ’ä»¶ï¼Œæä¾› REST API æ¥å£æ¥è·å–ç©å®¶ä¿¡æ¯ã€‚**å®‰è£…å³ç”¨ï¼Œé›¶é…ç½®å¯åŠ¨ï¼**

**ä½œè€…**: httye
**é¡¹ç›®**: UserInfoAPI

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…æ’ä»¶
1. ä¸‹è½½ `UserInfoAPI-2.0.jar` æ–‡ä»¶
2. å°† JAR æ–‡ä»¶æ”¾å…¥æœåŠ¡å™¨çš„ `plugins` æ–‡ä»¶å¤¹
3. å¯åŠ¨æœåŠ¡å™¨ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶
4. **å®Œæˆï¼** APIæœåŠ¡å™¨ä¼šè‡ªåŠ¨å¯åŠ¨åœ¨ `http://localhost:8080`

### 2. æµ‹è¯•API
å¯åŠ¨æœåŠ¡å™¨åï¼Œç«‹å³æµ‹è¯•APIæ˜¯å¦æ­£å¸¸å·¥ä½œï¼š
```bash
curl "http://localhost:8080/api/status"
```

å¦‚æœçœ‹åˆ° `{"status":"online","plugin":"UserInfoAPI","version":"2.0"}`ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼

### 3. PHPè°ƒç”¨ç¤ºä¾‹
```php
// åŒ…å«ç®€æ˜“å®¢æˆ·ç«¯
include 'minecraft_api.php';

// è·å–ç©å®¶ä¿¡æ¯
$player = getPlayerInfo('Steve');
echo "ç©å®¶ç­‰çº§: " . $player['level'];

// è·å–åœ¨çº¿ç©å®¶
$online = getOnlinePlayers();
echo "åœ¨çº¿äººæ•°: " . $online['count'];

// æ£€æŸ¥ç©å®¶æ˜¯å¦åœ¨çº¿
if (isPlayerOnline('Steve')) {
    echo "Steve åœ¨çº¿ï¼";
}
```

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

- âœ… **é›¶é…ç½®å¯åŠ¨** - æ’ä»¶å®‰è£…åç«‹å³å¯ç”¨
- âœ… **æ‰¹é‡æŸ¥è¯¢** - ä¸€æ¬¡æ€§æŸ¥è¯¢å¤šä¸ªç©å®¶ä¿¡æ¯
- âœ… **ç¦»çº¿ç©å®¶æ”¯æŒ** - å³ä½¿ç©å®¶ç¦»çº¿ä¹Ÿèƒ½è·å–åŸºæœ¬ä¿¡æ¯
- âœ… **æ•°æ®å¯¼å‡º** - æ”¯æŒJSON/CSVæ ¼å¼å¯¼å‡º
- âœ… **APIé™æµ** - é˜²æ­¢APIè¢«æ»¥ç”¨
- âœ… **æ™ºèƒ½ç¼“å­˜** - æé«˜å“åº”é€Ÿåº¦
- âœ… **è¯¦ç»†æ—¥å¿—** - ä¾¿äºè°ƒè¯•å’Œç›‘æ§
- âœ… **PHPå‹å¥½** - ä¼˜åŒ–çš„JSONæ ¼å¼å’ŒCORSæ”¯æŒ
- âœ… **é”™è¯¯æ¢å¤** - è‡ªåŠ¨ä¿®å¤é…ç½®é—®é¢˜

## ğŸ”§ API ç«¯ç‚¹

### åŸºç¡€ç«¯ç‚¹
| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/status` | GET | è·å–æœåŠ¡å™¨çŠ¶æ€ |
| `/api/user/info?username=Steve` | GET | è·å–ç©å®¶å®Œæ•´ä¿¡æ¯ |
| `/api/user/level?username=Steve` | GET | è·å–ç©å®¶ç­‰çº§ä¿¡æ¯ |
| `/api/user/location?username=Steve` | GET | è·å–ç©å®¶ä½ç½®ä¿¡æ¯ |
| `/api/user/inventory?username=Steve` | GET | è·å–ç©å®¶èƒŒåŒ…ä¿¡æ¯ |
| `/api/online-players` | GET | è·å–åœ¨çº¿ç©å®¶åˆ—è¡¨ |

### é«˜çº§ç«¯ç‚¹
| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/user/batch` | POST | æ‰¹é‡æŸ¥è¯¢ç©å®¶ä¿¡æ¯ |
| `/api/export?type=players&format=json` | GET | å¯¼å‡ºç©å®¶æ•°æ® |
| `/api/user/login-records?username=Steve` | GET | è·å–ç©å®¶ç™»å½•è®°å½• |
| `/api/security/info` | GET | è·å–å®‰å…¨ç³»ç»Ÿä¿¡æ¯ |
### æ‰¹é‡æŸ¥è¯¢ç¤ºä¾‹
```bash
curl -X POST "http://localhost:8080/api/user/batch?api_key=ä½ çš„å¯†é’¥" \
  -H "Content-Type: application/json" \
  -d '{"usernames":["Steve","Alex"],"queryType":"info"}'
```

### ç¦»çº¿ç©å®¶æŸ¥è¯¢
ç°åœ¨æ”¯æŒæŸ¥è¯¢ç¦»çº¿ç©å®¶çš„åŸºæœ¬ä¿¡æ¯ï¼ˆéœ€è¦ç©å®¶æ›¾ç»åŠ å…¥è¿‡æœåŠ¡å™¨ï¼‰ï¼š
- **åœ¨çº¿ç©å®¶**: è¿”å›å®æ—¶æ•°æ®ï¼Œ`online` å­—æ®µä¸º `true`
- **ç¦»çº¿ç©å®¶**: è¿”å›å†å²æ•°æ®ï¼Œ`online` å­—æ®µä¸º `false`
- **ä»æœªåŠ å…¥çš„ç©å®¶**: è¿”å›é”™è¯¯ä¿¡æ¯

ç¤ºä¾‹å“åº”ï¼š
```json
{
  "username": "Steve",
  "uuid": "8667ba71b85a407a960c8e4e30a6b02d",
  "level": 0,
  "exp": 0.0,
  "health": 20.0,
  "foodLevel": 20,
  "gameMode": "SURVIVAL",
  "online": false,
  "firstPlayed": 1640995200000,
  "lastPlayed": 1640995200000,
  "isOnline": false,
  "whitelisted": false,
  "banned": false,
  "op": false,
  "currentSessionOnlineTime": 0,
  "totalOnlineTime": 3600
}
```

### åœ¨çº¿æ—¶é•¿åŠŸèƒ½
æ–°å¢å½“æ¬¡åœ¨çº¿æ—¶é•¿å’Œæ€»åœ¨çº¿æ—¶é•¿ç»Ÿè®¡ï¼š
- **currentSessionOnlineTime**: å½“å‰ä¼šè¯åœ¨çº¿æ—¶é•¿ï¼ˆç§’ï¼‰
- **totalOnlineTime**: ç©å®¶æ€»åœ¨çº¿æ—¶é•¿ï¼ˆç§’ï¼‰


## ğŸ”‘ å®‰å…¨è®¤è¯

æ’ä»¶é»˜è®¤å…³é—­å®‰å…¨åŠŸèƒ½ï¼Œæ–¹ä¾¿å¿«é€Ÿå¼€å§‹ä½¿ç”¨ã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®å¯ç”¨ï¼š

```yaml
security:
  enabled: true
  allowed-ips:
    - "127.0.0.1"
    - "192.168.1.0/24"
  api-keys:
    - key: "ä½ çš„å®‰å…¨å¯†é’¥"
      name: "ç”Ÿäº§ç¯å¢ƒå¯†é’¥"
      active: true
```

## âš™ï¸ é…ç½®æ–‡ä»¶

æ’ä»¶é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶ `plugins/UserInfoAPI/config.yml`ï¼š

```yaml
# APIæœåŠ¡å™¨é…ç½®
api:
  host: "0.0.0.0"
  port: 8080

# å®‰å…¨è®¾ç½®ï¼ˆé»˜è®¤å…³é—­ï¼‰
security:
  enabled: false

# é™æµè®¾ç½®ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
rate-limit:
  enabled: true
  requests-per-minute: 60
```

## ğŸ® æ¸¸æˆå†…å‘½ä»¤

- `/userinfo status` - æŸ¥çœ‹æ’ä»¶çŠ¶æ€å’ŒAPIä¿¡æ¯
- `/userinfo reload` - é‡è½½é…ç½®æ–‡ä»¶
- `/userinfo key generate [åç§°]` - ç”Ÿæˆæ–°çš„APIå¯†é’¥
- `/userinfo help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

**æƒé™è¦æ±‚**: `userinfoapi.admin`

## ğŸ“Š è¿”å›æ•°æ®æ ¼å¼

### ç©å®¶ä¿¡æ¯ç¤ºä¾‹
```json
{
  "username": "Steve",
  "level": 10,
  "exp": 0.5,
  "location": {
    "x": 100.5,
    "y": 64.0,
    "z": -200.3,
    "world": "world"
  },
  "health": 20.0,
  "gameMode": "SURVIVAL"
}
```

### åœ¨çº¿ç©å®¶ç¤ºä¾‹
```json
{
  "count": 3,
  "players": [
    {
      "username": "Steve",
      "displayName": "Steve",
      "onlineTime": 3600
    }
  ]
}
```

## ğŸ› ï¸ ç¼–è¯‘æ–¹æ³•

å¦‚æœéœ€è¦è‡ªè¡Œç¼–è¯‘ï¼š
```bash
# ç¡®ä¿å®‰è£…äº† Java 17+ å’Œ Maven
mvn clean package
# ç”Ÿæˆçš„JARæ–‡ä»¶åœ¨ target/ ç›®å½•
```

## ğŸ“ æ–‡ä»¶è¯´æ˜

```
UserInfoAPI/
â”œâ”€â”€ UserInfoAPI-2.0.jar          # æ’ä»¶ä¸»æ–‡ä»¶
â”œâ”€â”€ simple_php_client.php        # ç®€æ˜“PHPå®¢æˆ·ç«¯
â”œâ”€â”€ php_client_library.php       # å®Œæ•´PHPå®¢æˆ·ç«¯åº“
â”œâ”€â”€ php_example.php             # PHPä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ README.md                   # æœ¬æ–‡æ¡£
â””â”€â”€ config.yml                  # é…ç½®æ–‡ä»¶æ¨¡æ¿
```

## ğŸ” æ•…éšœæ’é™¤

### APIæ— æ³•è®¿é—®
1. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`netstat -an | findstr 8080`
2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
3. æŸ¥çœ‹æœåŠ¡å™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### è·å–ä¸åˆ°ç©å®¶ä¿¡æ¯
1. ç¡®ä¿ç©å®¶åœ¨çº¿
2. æ£€æŸ¥ç©å®¶åæ‹¼å†™
3. æŸ¥çœ‹æœåŠ¡å™¨æ§åˆ¶å°æ—¥å¿—

### PHPè°ƒç”¨å¤±è´¥
1. æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
2. ç¡®ä¿æœåŠ¡å™¨åœ°å€æ­£ç¡®
3. æ£€æŸ¥PHPçš„cURLæ‰©å±•æ˜¯å¦å¯ç”¨

## ğŸ”§ é«˜çº§é…ç½®

### é™æµè®¾ç½®
```yaml
rate-limit:
  enabled: true
  requests-per-minute: 60    # æ¯åˆ†é’Ÿæœ€å¤š60æ¬¡è¯·æ±‚
  requests-per-hour: 1000    # æ¯å°æ—¶æœ€å¤š1000æ¬¡è¯·æ±‚
```

### æ‰¹é‡æŸ¥è¯¢è®¾ç½®
```yaml
batch-query:
  enabled: true
  max-players: 50           # å•æ¬¡æœ€å¤šæŸ¥è¯¢50ä¸ªç©å®¶
```

### æ•°æ®å¯¼å‡ºè®¾ç½®
```yaml
data-export:
  enabled: true
  max-records: 1000         # æœ€å¤šå¯¼å‡º1000æ¡è®°å½•
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **å¯ç”¨ç¼“å­˜**: å‡å°‘é‡å¤æŸ¥è¯¢
- **åˆç†é™æµ**: é˜²æ­¢APIè¿‡è½½
- **æ‰¹é‡æŸ¥è¯¢**: å‡å°‘è¯·æ±‚æ¬¡æ•°
- **é€‰æ‹©å¿…è¦å­—æ®µ**: é¿å…è·å–ä¸éœ€è¦çš„æ•°æ®

## ğŸ¤ æ”¯æŒä¸åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼š
- æäº¤ Issue
- æŸ¥çœ‹æœåŠ¡å™¨æ§åˆ¶å°æ—¥å¿—
- æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•

## ğŸ“„ è®¸å¯è¯

æ­¤æ’ä»¶éµå¾ª MIT è®¸å¯è¯ã€‚è¯¦è§ LICENSE æ–‡ä»¶ã€‚

---

**ä½œè€…**: httye
**é¡¹ç›®**: UserInfoAPI
**ç‰ˆæœ¬**: 2.0

**äº«å—ä½¿ç”¨ UserInfoAPIï¼** ğŸ‰